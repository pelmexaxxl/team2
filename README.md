# ü§ñ PulseBot ‚Äî Telegram –±–æ—Ç –¥–ª—è –ø—É–ª—å—Å-–æ–ø—Ä–æ—Å–æ–≤

PulseBot ‚Äî —ç—Ç–æ —Ç–µ–ª–µ–≥—Ä–∞–º-–±–æ—Ç, —Å–æ–∑–¥–∞–Ω–Ω—ã–π —Å –ø–æ–º–æ—â—å—é [aiogram](https://docs.aiogram.dev), –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∑–≤–æ–ª—è–µ—Ç —Å–æ–∑–¥–∞–≤–∞—Ç—å, –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å –∏ –ø—Ä–æ—Ö–æ–¥–∏—Ç—å –∞–Ω–æ–Ω–∏–º–Ω—ã–µ (–∏–ª–∏ –Ω–µ—Ç) –ø—É–ª—å—Å-–æ–ø—Ä–æ—Å—ã –ø—Ä—è–º–æ –≤ Telegram.

---

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –±–æ—Ç–∞ –≤ —á–∞—Ç—ã/–≥—Ä—É–ø–ø—ã
- ‚úÖ –û—Ç–ø—Ä–∞–≤–∫–∞ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π —É—á–∞—Å—Ç–Ω–∏–∫–∞–º —á–∞—Ç–∞ —Å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ–º –ø—Ä–æ–π—Ç–∏ –æ–ø—Ä–æ—Å
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –æ–ø—Ä–æ—Å–æ–≤
  - –í–æ–ø—Ä–æ—Å—ã —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –æ—Ç–≤–µ—Ç–æ–º
  - –í–æ–ø—Ä–æ—Å—ã —Å –≤—ã–±–æ—Ä–æ–º –∏–∑ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
- ‚úÖ –•—Ä–∞–Ω–µ–Ω–∏–µ –∏ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- ‚úÖ FSM –ª–æ–≥–∏–∫–∞ –¥–ª—è –ø–æ—à–∞–≥–æ–≤–æ–≥–æ —Å–æ–∑–¥–∞–Ω–∏—è –æ–ø—Ä–æ—Å–æ–≤

---

## üóÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
pulse_bot/
‚îú‚îÄ‚îÄ main.py                # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
‚îú‚îÄ‚îÄ config.py              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–æ–∫–µ–Ω–∞ –∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ db.py                  # –†–∞–±–æ—Ç–∞ —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö (PostgreSQL)
‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py        # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ä–æ—É—Ç–µ—Ä–æ–≤
‚îÇ   ‚îî‚îÄ‚îÄ admin.py           # FSM-—Ö–µ–Ω–¥–ª–µ—Ä—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–ø—Ä–æ—Å–æ–≤
‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îî‚îÄ‚îÄ poll_manager.py    # –†–∞—Å—Å—ã–ª–∫–∞ –æ–ø—Ä–æ—Å–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º –∏–∑ —á–∞—Ç–æ–≤
```

---

## üß† –û–ø–∏—Å–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤

### `main.py`
–ó–∞–ø—É—Å–∫–∞–µ—Ç –±–æ—Ç–∞, —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç —Ä–æ—É—Ç–µ—Ä—ã, –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã, —Å—Ç–∞—Ä—Ç—É–µ—Ç `Dispatcher` —Å `MemoryStorage`.

### `config.py`
–°–æ–¥–µ—Ä–∂–∏—Ç:
- `TOKEN` ‚Äî —Ç–æ–∫–µ–Ω Telegram-–±–æ—Ç–∞
- `DB_CONFIG` ‚Äî –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ PostgreSQL

### `db.py`
–ú–æ–¥—É–ª—å –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ë–î. –†–µ–∞–ª–∏–∑—É–µ—Ç:
- `create_poll()` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ –æ–ø—Ä–æ—Å–∞
- `add_question_to_poll()` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–æ–ø—Ä–æ—Å–∞
- `add_option_to_question()` ‚Äî –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–∞ –æ—Ç–≤–µ—Ç–∞
- `get_users_in_chat()` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –±–µ—Å–µ–¥—ã

### `handlers/admin.py`
FSM-—Ö–µ–Ω–¥–ª–µ—Ä—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–ø—Ä–æ—Å–æ–≤:
- `/create_poll` ‚Äî –∑–∞–ø—É—Å–∫ —Å–æ–∑–¥–∞–Ω–∏—è –æ–ø—Ä–æ—Å–∞
- FSM: –∑–∞–≥–æ–ª–æ–≤–æ–∫ ‚Üí –æ–ø–∏—Å–∞–Ω–∏–µ ‚Üí –≤–æ–ø—Ä–æ—Å ‚Üí —Ç–∏–ø ‚Üí –≤–∞—Ä–∏–∞–Ω—Ç—ã ‚Üí –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

### `services/poll_manager.py`
–†–∞—Å—Å—ã–ª–∞–µ—Ç –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è —Å –ø—Ä–∏–≥–ª–∞—à–µ–Ω–∏–µ–º –ø—Ä–æ–π—Ç–∏ –æ–ø—Ä–æ—Å —É—á–∞—Å—Ç–Ω–∏–∫–∞–º —á–∞—Ç–∞.

---

## üõ† –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python 3.10+
- PostgreSQL
- `aiogram >= 3.x`

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
pip install -r requirements.txt
```

### –ü—Ä–∏–º–µ—Ä `requirements.txt`
```
aiogram
psycopg2-binary
```

---

## üóÉ SQL: —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–ø—Ä–∏–º–µ—Ä)
```sql
CREATE TABLE polls (
    id SERIAL PRIMARY KEY,
    title TEXT,
    description TEXT,
    creator_id BIGINT
);

CREATE TABLE questions (
    id SERIAL PRIMARY KEY,
    poll_id INTEGER REFERENCES polls(id),
    text TEXT,
    is_open BOOLEAN
);

CREATE TABLE options (
    id SERIAL PRIMARY KEY,
    question_id INTEGER REFERENCES questions(id),
    text TEXT
);

CREATE TABLE users (
    id BIGINT PRIMARY KEY
);

CREATE TABLE chat_members (
    chat_id BIGINT,
    user_id BIGINT REFERENCES users(id)
);
```

---


